```plantuml
@startuml Casos de Uso - BetAware API

!theme aws-orange
skinparam backgroundColor #F8F9FA
skinparam actor {
    BackgroundColor #3498DB
    BorderColor #2C3E50
    FontColor #FFFFFF
}
skinparam usecase {
    BackgroundColor #FFFFFF
    BorderColor #2C3E50
    FontSize 11
}

title **Casos de Uso - BetAware API**\n**Sistema de Conscientiza√ß√£o sobre Apostas Esportivas**

' === ATORES ===
actor "üë§ Usu√°rio\nComum" as usuario #3498DB
actor "üëë Administrador" as admin #E74C3C
actor "üì± App Mobile\n(React Native)" as mobile #9B59B6
actor "üíª App Web\n(Angular)" as web #27AE60

' === SISTEMA ===
rectangle "üè¶ **BetAware API**" {
    
    ' === AUTENTICA√á√ÉO E REGISTRO ===
    package "üîê Autentica√ß√£o" #E3F2FD {
        usecase "UC01: Registrar\nNovo Usu√°rio" as UC01
        usecase "UC02: Fazer Login\ne Obter JWT" as UC02
        usecase "UC03: Validar\nToken JWT" as UC03
    }
    
    ' === GEST√ÉO DE APOSTAS ===
    package "üé≤ Gest√£o de Apostas" #E8F5E8 {
        usecase "UC04: Criar\nAposta Simulada" as UC04
        usecase "UC05: Listar Minhas\nApostas" as UC05
        usecase "UC06: Filtrar Apostas\nPor Per√≠odo" as UC06
        usecase "UC07: Ver Estat√≠sticas\nDe Desempenho" as UC07
    }
    
    ' === ADMINISTRA√á√ÉO ===
    package "‚öôÔ∏è Administra√ß√£o" #FFF3E0 {
        usecase "UC08: Gerenciar\nUsu√°rios" as UC08
        usecase "UC09: Ver Relat√≥rios\nGerais" as UC09
        usecase "UC10: Monitorar\nSistema" as UC10
    }
    
    ' === INFRAESTRUTURA ===
    package "üõ†Ô∏è Infraestrutura" #F3E5F5 {
        usecase "UC11: Verificar\nSa√∫de da API" as UC11
        usecase "UC12: Consultar\nDocumenta√ß√£o Swagger" as UC12
        usecase "UC13: Tratar\nExce√ß√µes" as UC13
    }
}

' === BANCO DE DADOS ===
database "üóÑÔ∏è Banco H2\n(Dev/Test)" as db_h2 #FCE4EC
database "üóÑÔ∏è PostgreSQL\n(Produ√ß√£o)" as db_postgres #FCE4EC

' === RELACIONAMENTOS PRINCIPAIS ===

' Usu√°rio Comum
usuario --> UC01 : "Cria conta na plataforma"
usuario --> UC02 : "Acessa o sistema" 
usuario --> UC04 : "Simula apostas"
usuario --> UC05 : "Consulta hist√≥rico"
usuario --> UC06 : "Analisa per√≠odo espec√≠fico"
usuario --> UC07 : "Acompanha desempenho"

' Administrador
admin --> UC02 : "Login como admin"
admin --> UC08 : "Controle de usu√°rios" 
admin --> UC09 : "An√°lise geral do sistema"
admin --> UC10 : "Monitoramento"

' Apps Mobile e Web
mobile --> UC01 : "Registro via app"
mobile --> UC02 : "Login via app"
mobile --> UC04 : "Apostas via mobile"
mobile --> UC05 : "Consultas mobile"

web --> UC01 : "Registro via web"
web --> UC02 : "Login via web" 
web --> UC04 : "Apostas via web"
web --> UC05 : "Consultas web"
web --> UC06 : "Relat√≥rios web"

' Casos de uso internos
UC02 ..> UC03 : "<<includes>>"
UC04 ..> UC03 : "<<includes>>"
UC05 ..> UC03 : "<<includes>>"
UC06 ..> UC03 : "<<includes>>"
UC07 ..> UC03 : "<<includes>>"
UC08 ..> UC03 : "<<includes>>"

' Infraestrutura
UC11 --> db_h2 : "Verifica conex√£o"
UC04 --> db_h2 : "Persiste apostas"
UC05 --> db_h2 : "Consulta apostas"
UC01 --> db_h2 : "Cadastra usu√°rio"

' === FLUXOS DETALHADOS ===

note right of UC01
    **Fluxo Principal:**
    1. Usu√°rio fornece dados pessoais
    2. Sistema valida unicidade (email, CPF, username)
    3. Senha √© criptografada (BCrypt)
    4. Usu√°rio salvo com perfil USER
    5. Resposta de sucesso enviada
    
    **Fluxos Alternativos:**
    ‚Ä¢ Dados j√° existem ‚Üí 409 Conflict
    ‚Ä¢ Valida√ß√£o falha ‚Üí 400 Bad Request
end note

note right of UC02
    **Fluxo Principal:**
    1. Usu√°rio envia credenciais
    2. Spring Security autentica
    3. JWT √© gerado e assinado
    4. Token retornado com dados do usu√°rio
    
    **Fluxos Alternativos:**
    ‚Ä¢ Credenciais inv√°lidas ‚Üí 401 Unauthorized
    ‚Ä¢ Usu√°rio n√£o encontrado ‚Üí 404 Not Found
end note

note right of UC04
    **Fluxo Principal:**
    1. Token JWT validado
    2. Dados da aposta validados
    3. Usu√°rio identificado pelo token
    4. Aposta salva com data atual
    5. DTO da aposta retornado
    
    **Regras de Neg√≥cio:**
    ‚Ä¢ Valor deve ser positivo
    ‚Ä¢ Categoria obrigat√≥ria
    ‚Ä¢ Data n√£o pode ser passada
end note

note bottom of UC13
    **GlobalExceptionHandler intercepta:**
    ‚Ä¢ MethodArgumentNotValidException ‚Üí 400
    ‚Ä¢ BadCredentialsException ‚Üí 401  
    ‚Ä¢ UsuarioJaExisteException ‚Üí 409
    ‚Ä¢ RecursoNaoEncontradoException ‚Üí 404
    ‚Ä¢ RuntimeException ‚Üí 500
    
    **Resposta padronizada com:**
    ‚Ä¢ Timestamp, status, erro, mensagem, path
end note

' === TECNOLOGIAS ===
note top of "BetAware API"
    **Stack Tecnol√≥gico:**
    ‚Ä¢ Spring Boot 3.x
    ‚Ä¢ Spring Security + JWT
    ‚Ä¢ JPA/Hibernate
    ‚Ä¢ Bean Validation
    ‚Ä¢ Swagger/OpenAPI 3
    ‚Ä¢ Maven
end note

@enduml
```
